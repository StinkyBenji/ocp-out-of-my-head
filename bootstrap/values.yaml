default:
  app:
    isHelm: false
    enableAutoSync: true
    enabled: true
    destination:
      namespace: openshift-gitops
      server: https://kubernetes.default.svc
    project: default
    source:
      repoURL: git@github.com:StinkyBenji/ocp-out-of-my-head.git
      targetRevision: main

applications:
  openshift-pipelines:
    source:
      path: components/apps/openshift-pipelines-operator/overlays/latest

  cert-manager-operator:
    annotations:
      argocd.argoproj.io/sync-wave: "1"
    source:
      path: components/apps/cert-manager-operator/base

  custom-console:
    source: 
      path: components/configs/console-route/base

  cert-manager-webhook-hetzner:
    annotations:
      argocd.argoproj.io/sync-wave: "2"
    source:
      path: deploy/cert-manager-webhook-hetzne
      repoURL: git@github.com:StinkyBenji/cert-manager-webhook-hetzner.git
      targetRevision: main
      extraSourceFields: |
        helm:
          values: |
            groupName: ocp4.whatever.out-of-my-head.de
            certManager:
              namespace: openshift-cert-manager
              serviceAccountName: cert-manager
            secretName:
              - hetzner-api-token
            podSecurityContext:
              runAsGroup: 
              runAsUser: 
            securityContext:
              runAsUser:
              allowPrivilegeEscalation: false
              capabilities:
                drop: ["ALL"] 
    
  letsencrypt:
    annotations:
      argocd.argoproj.io/sync-wave: "3"
    source:
      path: components/configs/letsencrypt/base

  oauth:
    source:
      path: components/configs/oauth/overlays/gitlab

  certificates:
    annotations:
      argocd.argoproj.io/sync-wave: "4"
    source:
      path: components/configs/certificates/base
